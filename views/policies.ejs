<section>
  <div style="display:flex; gap:24px; align-items:flex-start; flex-wrap:wrap;">
    <div style="flex:2 1 520px; min-width:320px;">
      <div class="card">
        <div class="card-header" style="display:flex; align-items:center; justify-content:space-between;">
          <h2 style="margin:0;">Policies</h2>
          <% if (created) { %>
            <span style="color:#065f46; background:#d1fae5; border:1px solid #10b981; padding:4px 8px; border-radius:6px; font-size:0.9rem;">Saved</span>
          <% } %>
        </div>
        <div class="card-body">
          <% if (error) { %>
            <div style="margin-bottom:12px; color:#7f1d1d; background:#fee2e2; border:1px solid #ef4444; border-radius:6px; padding:8px 12px;">
              <%= error %>
            </div>
          <% } %>

          <% if (!policies || policies.length === 0) { %>
            <p style="color:#6b7280;">No policies created yet.</p>
          <% } else { %>
            <ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:14px;">
              <% policies.forEach(function(p) { %>
                <li style="border:1px solid #e5e7eb; border-radius:10px; padding:12px 14px; background:#fff;">
                  <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start; flex-wrap:wrap;">
                    <div style="flex:1 1 auto; min-width:260px;">
                      <h3 style="margin:0 0 6px 0; font-size:1.1rem; color:#111827;"><%= p.title %></h3>
                      <p style="white-space:pre-wrap; margin:0; color:#374151;"><%= p.description %></p>
                    </div>
                    <div style="flex:0 0 auto; min-width:220px; text-align:right; color:#6b7280; font-size:0.9rem;">
                      <div><i class="far fa-calendar"></i> Created: <%= (new Date(p.createdAt)).toLocaleString('en-IN', { dateStyle: 'medium', timeStyle: 'short' }) %></div>
                      <div><i class="far fa-clock"></i> Updated: <%= (new Date(p.updatedAt)).toLocaleString('en-IN', { dateStyle: 'medium', timeStyle: 'short' }) %></div>
                      <% if (p.createdBy) { %>
                        <div style="margin-top:4px;"><i class="far fa-user"></i> By: <%= p.createdBy %></div>
                      <% } %>
                    </div>
                  </div>
                </li>
              <% }); %>
            </ul>
          <% } %>
        </div>
      </div>
    </div>

    <div style="flex:1 1 380px; min-width:300px;">
      <div class="card">
        <div class="card-header">
          <h2 style="margin:0;">Create Policy</h2>
        </div>
        <div class="card-body">
          <form action="/policies" method="POST" style="display:flex; flex-direction:column; gap:12px;">
            <div>
              <label for="title" style="display:block; font-weight:600; margin-bottom:6px;">Policy Title</label>
              <input id="title" name="title" type="text" required maxlength="200" placeholder="Enter policy title"
                     style="width:100%; padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; outline:none;" />
            </div>
            <div>
              <label for="description" style="display:block; font-weight:600; margin-bottom:6px;">Description</label>
              <textarea id="description" name="description" required maxlength="10000" placeholder="Describe the policy in detail..."
                        rows="12" style="width:100%; min-height:280px; padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; resize:vertical; outline:none;"></textarea>
              <div style="color:#6b7280; font-size:0.85rem; margin-top:4px;">Max 10,000 characters</div>
            </div>
            <div style="display:flex; justify-content:flex-end; gap:10px;">
              <button type="submit" class="btn-primary" style="padding:10px 14px; border:none; border-radius:8px; background:#2563eb; color:white; cursor:pointer;">
                <i class="fas fa-save"></i> Save Policy
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
