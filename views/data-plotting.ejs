<div class="page-header">
  <h2 class="page-title">Government: Data Plotting</h2>
  <div class="last-updated">
    Total Cases: <%= stats.totalCases %> | Risk Level: <%= stats.riskLevel %> | Total Policies: <%= stats.totalPolicies || 0 %>
  </div>
</div>

<div class="stats-grid" style="margin-bottom: 1rem;">
  <div class="stat-card blue">
    <div class="stat-content">
      <div class="stat-info">
        <p class="stat-label">Total Cases (All-time)</p>
        <p class="stat-value"><%= (stats && stats.totalCases) || 0 %></p>
      </div>
      <div class="stat-icon"><i class="fas fa-database"></i></div>
    </div>
  </div>
  <div class="stat-card green">
    <div class="stat-content">
      <div class="stat-info">
        <p class="stat-label">Total Policies</p>
        <p class="stat-value"><%= (stats && stats.totalPolicies) || 0 %></p>
      </div>
      <div class="stat-icon"><i class="fas fa-scale-balanced"></i></div>
    </div>
  </div>
</div>

<!-- <div class="dashboard-card">
  <h3 class="card-title">Outbreak Hotspots</h3>
  <div class="outbreak-map">
    <div class="map-controls" style="display:flex;justify-content:flex-end;gap:0.5rem;margin-bottom:0.5rem;align-items:center;">
      <label for="outbreakMonthSelect" style="margin-right:0.5rem;">Month:</label>
      <select id="outbreakMonthSelect" style="padding:0.35rem 0.5rem;border:1px solid #d1d5db;border-radius:0.375rem;background:#fff;"></select>
    </div>
    <div id="map" style="height: 520px; border-radius: 8px; overflow: hidden;"></div>
    <div class="map-legend">
      <div class="legend-item"><div class="legend-color high-risk"></div><span>High Risk</span></div>
      <div class="legend-item"><div class="legend-color medium-risk"></div><span>Medium Risk</span></div>
      <div class="legend-item"><div class="legend-color low-risk"></div><span>Low Risk</span></div>
    </div>
  </div>
</div> -->

<div class="dashboard-card">
    <h3 class="card-title">Sampling Points</h3>
    <div class="map-controls" style="display:flex;gap:0.5rem;justify-content:flex-end;margin-bottom:0.5rem;align-items:center;">
        <label for="sampleYearSelect">Year:</label>
        <select id="sampleYearSelect" style="padding:0.35rem 0.5rem;border:1px solid #d1d5db;border-radius:0.375rem;background:#fff;"></select>
        <label for="sampleMonthSelect" style="margin-left:0.75rem;">Month:</label>
        <select id="sampleMonthSelect" style="padding:0.35rem 0.5rem;border:1px solid #d1d5db;border-radius:0.375rem;background:#fff;"></select>
    </div>
    <div id="heavyMap" style="width:100%;height:520px;border:1px solid #e5e7eb;border-radius:8px;"></div>
    <div class="map-legend" style="margin-top:0.5rem;display:flex;gap:1rem;align-items:center;">
        <div class="legend-item"><span style="display:inline-block;width:12px;height:12px;background:#DC2626;border-radius:2px;margin-right:6px;"></span>High (>=4 metals exceed)</div>
        <div class="legend-item"><span style="display:inline-block;width:12px;height:12px;background:#F59E0B;border-radius:2px;margin-right:6px;"></span>Medium (2-3)</div>
        <div class="legend-item"><span style="display:inline-block;width:12px;height:12px;background:#10B981;border-radius:2px;margin-right:6px;"></span>Low (1)</div>
        <div class="legend-item"><span style="display:inline-block;width:12px;height:12px;background:#3B82F6;border-radius:2px;margin-right:6px;"></span>Background (0)</div>
    </div>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="/js/map.js"></script>
<script src="/js/heavy-map.js"></script>
